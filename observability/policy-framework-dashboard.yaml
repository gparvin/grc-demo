kind: ConfigMap
apiVersion: v1
metadata:
  name: policy-framework-dashboard
  namespace: open-cluster-management-observability
  labels:
    grafana-custom-dashboard: "true"
data:
  policy-framework-dashboard.json: |
    {"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "gnetId": null, "graphTooltip": 0, "id": 25, "links": [], "panels": [{"datasource": null, "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0}, "id": 10, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "single"}}, "targets": [{"exemplar": true, "expr": "count(policy:policy_governance_info:propagated_count)", "instant": false, "interval": "", "legendFormat": "", "refId": "Propagated Policies"}, {"exemplar": true, "expr": "count(policy:policy_governance_info:propagated_noncompliant_count)", "hide": false, "instant": true, "interval": "", "legendFormat": "", "refId": "NonCompliant Policies"}], "title": "Policies", "type": "timeseries"}, {"datasource": null, "description": "View the work queue and the queue depth", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 9, "w": 12, "x": 12, "y": 0}, "id": 2, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "single"}}, "targets": [{"exemplar": true, "expr": "avg_over_time(workqueue_depth{name=\"policy-status-sync\"}[15m])", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Status Sync Queue Depth"}, {"exemplar": true, "expr": "sum(delta(controller_runtime_reconcile_total{controller=\"policy-status-sync\"}[15m]))", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Status Sync Reconciles"}, {"exemplar": true, "expr": "sum(increase(controller_runtime_reconcile_errors_total{controller=\"policy-status-sync\"}[15m]))", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Status Sync Reconcile Errors"}], "title": "Policy Sync Health", "type": "timeseries"}, {"datasource": null, "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8}, "id": 8, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "single"}}, "targets": [{"exemplar": true, "expr": "kube_pod_container_status_restarts_total{container=\"config-policy-controller\"}", "instant": false, "interval": "", "legendFormat": "", "refId": "Config policy restarts"}, {"exemplar": true, "expr": "kube_pod_container_status_restarts_total{container=\"governance-policy-framework-addon\"}", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Governance framework restarts"}], "title": "Policy Framework Pod Restarts", "type": "timeseries"}, {"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 12, "y": 9}, "id": 4, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "single"}}, "targets": [{"exemplar": true, "expr": "sum(increase(controller_runtime_reconcile_total{controller=\"policy-template-sync\"}[15m]))", "instant": false, "interval": "", "legendFormat": "", "refId": "Template Sync Reconcile Activity"}, {"exemplar": true, "expr": "sum(increase(policy_system_errors_total{service=\"governance-policy-framework-metrics\"}[15m]))", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Policy Framework Errors"}, {"exemplar": true, "expr": "sum(increase(controller_runtime_reconcile_total{controller=\"policy-template-sync\"}[15m]))", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Template Sync Reconcile"}], "title": "Template Sync Health", "type": "timeseries"}, {"datasource": null, "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 0, "y": 16}, "id": 6, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "single"}}, "targets": [{"exemplar": true, "expr": "sum(increase(policy_system_errors_total{service=\"config-policy-controller-metrics\"}[15m]))", "instant": false, "interval": "", "legendFormat": "", "refId": "Configuration Policy System Errors"}, {"exemplar": true, "expr": "sum(increase(kube_pod_container_status_restarts_total{container=\"config-policy-controller\"}[15m]))", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Configuration Policy Restarts"}, {"exemplar": true, "expr": "sum(increase(config_policy_evaluation_total[180s]))", "hide": false, "instant": false, "interval": "", "legendFormat": "", "refId": "Configuration Policy Evaluations"}], "title": "Configuration Policy Health", "type": "timeseries"}], "refresh": false, "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": []}, "time": {"from": "now-24h", "to": "now"}, "timepicker": {}, "timezone": "", "title": "Policy Framework Dashboard", "version": 10}
